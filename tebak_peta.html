<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tebak Peta Si Petualang</title>
    <link rel="icon" type="image/png" href="favicon.png">

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- Google Fonts: Fredoka & Varela Round -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600;700&family=Varela+Round&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Varela Round', sans-serif;
            background-color: #E0F2FE;
            /* Sky-100 */
            background-image:
                radial-gradient(#7DD3FC 15%, transparent 16%),
                radial-gradient(#7DD3FC 15%, transparent 16%);
            background-size: 60px 60px;
            background-position: 0 0, 30px 30px;
        }

        .blob-shape {
            border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            animation: morph 8s ease-in-out infinite;
        }

        @keyframes morph {

            0%,
            100% {
                border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            }

            34% {
                border-radius: 70% 30% 50% 50% / 30% 30% 70% 70%;
            }

            67% {
                border-radius: 100% 60% 60% 100% / 100% 100% 60% 60%;
            }
        }

        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        .animate-float {
            animation: float 4s ease-in-out infinite;
        }

        /* Filter untuk mewarnai SVG hitam menjadi warna-warni */
        .map-color-1 {
            filter: invert(53%) sepia(90%) saturate(300%) hue-rotate(320deg) brightness(100%) contrast(95%);
        }

        /* Pinkish */
        .map-color-2 {
            filter: invert(65%) sepia(30%) saturate(900%) hue-rotate(80deg) brightness(100%) contrast(90%);
        }

        /* Greenish */
        .map-color-3 {
            filter: invert(45%) sepia(60%) saturate(800%) hue-rotate(180deg) brightness(100%) contrast(90%);
        }

        /* Blueish */
        .map-color-4 {
            filter: invert(70%) sepia(60%) saturate(2000%) hue-rotate(350deg) brightness(100%) contrast(105%);
        }

        /* Orangeish */
    </style>
</head>

<body>

    <div id="root"></div>

    <script type="text/babel">

        // --- DATABASE PETA (Bentuk Ikonik & Besar) ---
        // Data terenkripsi untuk mencegah inspect element
        const encryptedMapsData = "W3siY29kZSI6ImlkIiwibmFtZSI6Iklkb25lc2lhIiwiaGludCI6Ik5lZ2FyYSBraXRhISBCYW55YWsgcHVsYXVueWEuIn0seyJjb2RlIjoiYXUiLCJuYW1lIjoiQXVzdHJhbGlhIiwiaGludCI6IkJlbnVhIEthbmd1cnUuIn0seyJjb2RlIjoiaXQiLCJuYW1lIjoiSXRhbGlhIiwiaGludCI6IkJlbnR1a255YSBzZXBlcnRpIFNlcGF0dSBCb290IPCfkaMifSx7ImNvZGUiOiJqcCIsIm5hbWUiOiJKZXBhbmciLCJoaW50IjoiTWVsZW5na3VuZyBzZXBlcnRpIHBpc2FuZy4ifSx7ImNvZGUiOiJ1cyIsIm5hbWUiOiJBbWVyaWthIFNlcmlrYXQiLCJoaW50IjoiTmVnYXJhIGJlc2FyIGJlcmJlbnR1ayBrb3RhayBsZWJhci4ifSx7ImNvZGUiOiJpbiIsIm5hbWUiOiJJbmRpYSIsImhpbnQiOiJTZXBlcnRpIHNlZ2l0aWdhIHRlcmJhbGlrIPCflL0ifSx7ImNvZGUiOiJiciIsIm5hbWUiOiJCcmF6aWwiLCJoaW50IjoiUGFsaW5nIGJlc2FyIGRpIEFtZXJpa2EgU2VsYXRhbi4ifSx7ImNvZGUiOiJjbCIsIm5hbWUiOiJDaGlsaSIsImhpbnQiOiJQYW5qYW5nIGRhbiBrdXJ1cyBzZXBlcnRpIENhY2luZyDwn6qxIn0seyJjb2RlIjoiZnIiLCJuYW1lIjoiUGVyYW5jaXMiLCJoaW50IjoiQmVudHVrbnlhIHNlZ2kgZW5hbS4ifSx7ImNvZGUiOiJjbiIsIm5hbWUiOiJDaGluYSIsImhpbnQiOiJCZW50dWtueWEgc2VwZXJ0aSBBeWFtIEphZ28g8J+QkyJ9LHsiY29kZSI6ImdiIiwibmFtZSI6Iklkb2dyaXMiLCJoaW50IjoiUHVsYXUgUmF0dSBFbGl6YWJldGguIn0seyJjb2RlIjoicnUiLCJuYW1lIjoiUnVzaWEiLCJoaW50IjoiTmVnYXJhIHBhbGluZyBwYW5qYW5nIGRpIGR1bmlhLiJ9LHsiY29kZSI6InNhIiwibmFtZSI6IkFyYWIgU2F1ZGkiLCJoaW50IjoiQmVudHVrIHNlcGF0dSBiZXNhciBkaSBwYXNpci4ifSx7ImNvZGUiOiJlZyIsIm5hbWUiOiJNZXNpciIsImhpbnQiOiJCZW50dWsga290YWssIGFkYSBwaXJhbWlkYS4ifSx7ImNvZGUiOiJ2biIsIm5hbWUiOiJWaWV0bmFtIiwiaGludCI6IkJlbnR1ayBodXJ1ZiBTLiJ9LHsiY29kZSI6ImNhIiwibmFtZSI6IkthbmFkYSIsImhpbnQiOiJOZWdhcmEgdGV0YW5nZ2EgQW1lcmlrYSBkaSB1dGFyYSwgYWRhIGRhdW4gbWFwbGUg8J+NgSJ9LHsiY29kZSI6Im14IiwibmFtZSI6Ik1la3Npa28iLCJoaW50IjoiRGkgc2VsYXRhbiBBbWVyaWthLCBzdWthIFRhY28g8J+MriJ9LHsiY29kZSI6ImFyIiwibmFtZSI6IkFyZ2VudGluYSIsImhpbnQiOiJOZWdhcmEgYXNhbCBNZXNzaSwgcGFuamFuZyBkaSBBbWVyaWthIFNlbGF0YW4g4pq9In0seyJjb2RlIjoiZGUiLCJuYW1lIjoiSmVybWFuIiwiaGludCI6IlRlcmtlbmFsIGRlbmdhbiBtb2JpbCBkYW4gc29zaXMg8J+MrSJ9LHsiY29kZSI6ImVzIiwibmFtZSI6IlNwYW55b2wiLCJoaW50IjoiTmVnYXJhIE1hdGFkb3Ig8J+QgiJ9LHsiY29kZSI6InRoIiwibmFtZSI6IlRoYWlsYW5kIiwiaGludCI6IkJlbnR1a255YSBzZXBlcnRpIGtlcGFsYSBHYWphaCDwn5CYIn0seyJjb2RlIjoia3IiLCJuYW1lIjoiS29yZWEgU2VsYXRhbiIsImhpbnQiOiJOZWdhcmEgSy1Qb3Ag8J+OtSJ9LHsiY29kZSI6Im56IiwibmFtZSI6IlNlbGFuZGlhIEJhcnUiLCJoaW50IjoiRHVhIHB1bGF1IHRldGFuZ2dhIEF1c3RyYWxpYSDwn6WdIn0seyJjb2RlIjoibWciLCJuYW1lIjoiTWFkYWdhc2thciIsImhpbnQiOiJQdWxhdSBiZXNhciBkaSBkZWthdCBBZnJpa2EsIGFkYSBsZW11ciDwn5CiIn0seyJjb2RlIjoicGgiLCJuYW1lIjoiRmlsaXBpbmEiLCJoaW50IjoiTmVnYXJhIGtlcHVsYXVhbiB0ZXRhbmdnYSBraXRhIGRpIHV0YXJhIPCfh7Dwn4exIn0seyJjb2RlIjoidHIiLCJuYW1lIjoiVHVya2kiLCJoaW50IjoiSmVtYmF0YW4gYW50YXJhIEV1cm9wYSBkYW4gQXNpYSDwn4yJIn0seyJjb2RlIjoibm8iLCJuYW1lIjoiTm9yd2VnaWEiLCJoaW50IjoiTmVnYXJhIFZpa2luZyB5YW5nIHBhbmphbmcgZGkgdXRhcmEg4p2E77iPIn0seyJjb2RlIjoiZ3IiLCJuYW1lIjoiWXVuYW5pIiwiaGludCI6IkJhbnlhayBwdWxhdSBkYW4gc2VqYXJhaCBrdW5vIPCfj5sifSx7ImNvZGUiOiJwdCIsIm5hbWUiOiJQb3J0dWdhbCIsImhpbnQiOiJUZXRhbmdnYSBTcGFueW9sLCBhc2FsIFJvbmFsZG8g4pq9In0seyJjb2RlIjoibXkiLCJuYW1lIjoiTWFsYXlzaWEiLCJoaW50IjoiVGV0YW5nZ2Egc2VydW1wdW4ga2l0YSDwn4e68J+HuCJ9LHsiY29kZSI6InNnIiwibmFtZSI6IlNpbmdhcHVyYSIsImhpbnQiOiJOZWdhcmEga290YSBrZWNpbCB5YW5nIHNhbmdhdCBtYWp1IPCfpokifSx7ImNvZGUiOiJwZyIsIm5hbWUiOiJQYXB1YSBOdWdpbmkiLCJoaW50IjoiQmVyYmFnaSBwdWxhdSBkZW5nYW4gUGFwdWEga2l0YSDwn4+d77iPIn0seyJjb2RlIjoibGsiLCJuYW1lIjoiU3JpIExhbmthIiwiaGludCI6IlB1bGF1IHRldGVzYW4gYWlyIG1hdGEgZGkgYmF3YWggSW5kaWEg8J+SpyJ9LHsiY29kZSI6ImlzIiwibmFtZSI6IklzbGFuZGlhIiwiaGludCI6IlB1bGF1IEVzIGRhbiBBcGkg8J+MiSJ9LHsiY29kZSI6ImN1IiwibmFtZSI6Ikt1YmEiLCJoaW50IjoiUHVsYXUgY2VydXR1IGRpIEthcmliaWEg8J+HqPCfh7UifV0=";

        // Fungsi dekripsi sederhana
        const decryptMapsData = (encrypted) => {
            try {
                const decoded = atob(encrypted);
                return JSON.parse(decoded);
            } catch (e) {
                console.error('Decryption failed');
                return [];
            }
        };

        // Dekripsi data saat runtime
        const mapsData = decryptMapsData(encryptedMapsData);

        // --- AUDIO ENGINE ---
        const playSound = (type) => {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (!AudioContext) return;
            const ctx = new AudioContext();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);

            if (type === 'correct') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(400, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(800, ctx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.2, ctx.currentTime);
                gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.4);
                osc.start();
                osc.stop(ctx.currentTime + 0.4);
            } else if (type === 'wrong') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(150, ctx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, ctx.currentTime + 0.3);
                gain.gain.setValueAtTime(0.2, ctx.currentTime);
                gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.3);
                osc.start();
                osc.stop(ctx.currentTime + 0.3);
            } else if (type === 'pop') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, ctx.currentTime);
                gain.gain.setValueAtTime(0.05, ctx.currentTime);
                gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.1);
                osc.start();
                osc.stop(ctx.currentTime + 0.1);
            }
        };

        function App() {
            const [view, setView] = React.useState('home'); // home, play, end
            const [qList, setQList] = React.useState([]);
            const [qIndex, setQIndex] = React.useState(0);
            const [score, setScore] = React.useState(0);
            const [revealed, setRevealed] = React.useState(false);
            const [colorClass, setColorClass] = React.useState('map-color-1');

            // Random color for map shape
            const getRandomColorClass = () => {
                const colors = ['map-color-1', 'map-color-2', 'map-color-3', 'map-color-4'];
                return colors[Math.floor(Math.random() * colors.length)];
            };

            const startGame = () => {
                playSound('pop');
                const shuffled = [...mapsData].sort(() => 0.5 - Math.random()).slice(0, 10);
                setQList(shuffled);
                setQIndex(0);
                setScore(0);
                setRevealed(false);
                setColorClass(getRandomColorClass());
                setView('play');
            };

            const handleAnswer = (correct) => {
                if (correct) {
                    playSound('correct');
                    setScore(s => s + 1);
                    confetti({
                        particleCount: 80, spread: 60, origin: { y: 0.6 },
                        colors: ['#60A5FA', '#34D399', '#F472B6']
                    });
                    setTimeout(nextQ, 600);
                } else {
                    playSound('wrong');
                    setTimeout(nextQ, 1000);
                }
            };

            const nextQ = () => {
                if (qIndex < qList.length - 1) {
                    setQIndex(i => i + 1);
                    setRevealed(false);
                    setColorClass(getRandomColorClass());
                } else {
                    setView('end');
                    playSound('correct');
                }
            };

            const currentQ = qList[qIndex];

            // --- VIEWS ---

            if (view === 'home') {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden">
                        {/* Decorative Blobs */}
                        <div className="absolute top-10 left-10 w-32 h-32 bg-blue-300 opacity-50 blob-shape animate-float"></div>
                        <div className="absolute bottom-10 right-10 w-40 h-40 bg-pink-300 opacity-50 blob-shape animate-float" style={{ animationDelay: '1s' }}></div>

                        <div className="relative z-10 bg-white/80 backdrop-blur-md p-8 rounded-3xl shadow-2xl border-4 border-white text-center max-w-md w-full">
                            <div className="text-6xl mb-4 animate-bounce">üó∫Ô∏è</div>
                            <h1 className="text-4xl font-extrabold text-slate-700 mb-2 font-[Fredoka]">Tebak Peta</h1>
                            <p className="text-slate-500 text-lg mb-8 font-medium">Petualangan Keliling Dunia!</p>
                            <button onClick={startGame} className="w-full bg-sky-500 hover:bg-sky-600 text-white text-2xl font-bold py-4 rounded-xl shadow-[0_6px_0_#0369a1] active:translate-y-1 active:shadow-none transition-all">
                                Mulai Petualangan! üöÄ
                            </button>
                        </div>
                    </div>
                );
            }

            if (view === 'end') {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-4">
                        <div className="bg-white p-8 rounded-3xl shadow-xl border-4 border-yellow-300 max-w-md w-full text-center">
                            <h2 className="text-3xl font-bold text-slate-700 mb-4">Misi Selesai!</h2>
                            <div className="text-7xl font-black text-sky-500 mb-2">{score * 10}</div>
                            <p className="text-gray-400 font-bold mb-8">Poin Kamu</p>
                            <button onClick={startGame} className="w-full bg-yellow-400 hover:bg-yellow-500 text-yellow-900 text-xl font-bold py-3 rounded-xl shadow-[0_4px_0_#ca8a04] active:translate-y-1 active:shadow-none transition-all">
                                Main Lagi üîÑ
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4">
                    {/* Header */}
                    <div className="w-full max-w-md flex justify-between mb-6">
                        <div className="bg-white/90 backdrop-blur px-4 py-2 rounded-lg font-bold text-slate-600 shadow-sm border border-slate-200">
                            Map {qIndex + 1}/10
                        </div>
                        <div className="bg-white/90 backdrop-blur px-4 py-2 rounded-lg font-bold text-sky-600 shadow-sm border border-sky-100">
                            ‚≠ê {score}
                        </div>
                    </div>

                    {/* Map Card */}
                    <div className="relative bg-white p-6 rounded-[2.5rem] shadow-2xl border-8 border-white w-full max-w-md">

                        {/* Shape Container */}
                        <div className="aspect-square bg-slate-50 rounded-3xl mb-6 flex items-center justify-center p-8 relative overflow-hidden border-2 border-dashed border-slate-200">
                            {/* Hint Background Text */}
                            <div className="absolute inset-0 flex items-center justify-center opacity-5 pointer-events-none">
                                <span className="text-9xl font-black">?</span>
                            </div>

                            {/* THE MAP IMAGE */}
                            <img
                                src={`https://raw.githubusercontent.com/djaiss/mapsicon/master/all/${currentQ.code}/vector.svg`}
                                className={`w-full h-full object-contain drop-shadow-lg transition-all duration-500 ${colorClass}`}
                                alt="Map Silhouette"
                            />
                        </div>

                        {/* Question / Reveal Area */}
                        <div className="text-center h-24 flex flex-col items-center justify-center mb-4">
                            <div
                                onClick={() => { playSound('pop'); setRevealed(true); }}
                                className={`cursor-pointer transition-all ${!revealed ? 'hover:scale-105' : ''}`}
                            >
                                {!revealed ? (
                                    <>
                                        <h2 className="text-3xl font-black text-slate-300 tracking-[0.3em]">?????</h2>
                                        <p className="text-xs text-sky-400 font-bold mt-2 bg-sky-50 px-3 py-1 rounded-full inline-block animate-pulse">
                                            üîç Klik untuk intip
                                        </p>
                                    </>
                                ) : (
                                    <div className="animate-pop">
                                        <h2 className="text-4xl font-black text-slate-800 tracking-tight">{currentQ.name}</h2>
                                        <p className="text-sm text-slate-500 font-medium mt-1">{currentQ.hint}</p>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Controls */}
                        <div className="grid grid-cols-2 gap-4">
                            <button onClick={() => handleAnswer(false)} className="bg-rose-100 hover:bg-rose-200 text-rose-500 font-black py-4 rounded-2xl shadow-[0_4px_0_#f43f5e] active:translate-y-1 active:shadow-none transition-all flex flex-col items-center">
                                <span className="text-2xl">‚ùå</span>
                                <span className="text-sm mt-1">Belum Tau</span>
                            </button>
                            <button onClick={() => handleAnswer(true)} className="bg-emerald-100 hover:bg-emerald-200 text-emerald-600 font-black py-4 rounded-2xl shadow-[0_4px_0_#059669] active:translate-y-1 active:shadow-none transition-all flex flex-col items-center">
                                <span className="text-2xl">‚úÖ</span>
                                <span className="text-sm mt-1">Benar!</span>
                            </button>
                        </div>

                    </div>

                    <div className="mt-6 text-center text-slate-400 text-xs font-bold opacity-60">
                        Happy Kid, Happy Family
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>

</html>