<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tebak Peta Si Petualang</title>
    <link rel="icon" type="image/png" href="favicon.png">

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- Google Fonts: Fredoka & Varela Round -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600;700&family=Varela+Round&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Varela Round', sans-serif;
            background-color: #E0F2FE;
            /* Sky-100 */
            background-image:
                radial-gradient(#7DD3FC 15%, transparent 16%),
                radial-gradient(#7DD3FC 15%, transparent 16%);
            background-size: 60px 60px;
            background-position: 0 0, 30px 30px;
        }

        .blob-shape {
            border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            animation: morph 8s ease-in-out infinite;
        }

        @keyframes morph {

            0%,
            100% {
                border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            }

            34% {
                border-radius: 70% 30% 50% 50% / 30% 30% 70% 70%;
            }

            67% {
                border-radius: 100% 60% 60% 100% / 100% 100% 60% 60%;
            }
        }

        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        .animate-float {
            animation: float 4s ease-in-out infinite;
        }

        /* Filter untuk mewarnai SVG hitam menjadi warna-warni */
        .map-color-1 {
            filter: invert(53%) sepia(90%) saturate(300%) hue-rotate(320deg) brightness(100%) contrast(95%);
        }

        /* Pinkish */
        .map-color-2 {
            filter: invert(65%) sepia(30%) saturate(900%) hue-rotate(80deg) brightness(100%) contrast(90%);
        }

        /* Greenish */
        .map-color-3 {
            filter: invert(45%) sepia(60%) saturate(800%) hue-rotate(180deg) brightness(100%) contrast(90%);
        }

        /* Blueish */
        .map-color-4 {
            filter: invert(70%) sepia(60%) saturate(2000%) hue-rotate(350deg) brightness(100%) contrast(105%);
        }

        /* Orangeish */
    </style>
</head>

<body>

    <div id="root"></div>

    <script type="text/babel">

        // --- DATABASE PETA (Bentuk Ikonik & Besar) ---
        // Menggunakan Mapsicon (SVG Shapes)
        const mapsData = [
            { code: 'id', name: 'Indonesia', hint: 'Negara kita! Banyak pulaunya.' },
            { code: 'au', name: 'Australia', hint: 'Benua Kanguru.' },
            { code: 'it', name: 'Italia', hint: 'Bentuknya seperti Sepatu Boot üë¢' },
            { code: 'jp', name: 'Jepang', hint: 'Melengkung seperti pisang.' },
            { code: 'us', name: 'Amerika Serikat', hint: 'Negara besar berbentuk kotak lebar.' },
            { code: 'in', name: 'India', hint: 'Seperti segitiga terbalik üîΩ' },
            { code: 'br', name: 'Brazil', hint: 'Paling besar di Amerika Selatan.' },
            { code: 'cl', name: 'Chili', hint: 'Panjang dan kurus seperti Cacing ü™±' },
            { code: 'fr', name: 'Perancis', hint: 'Bentuknya segi enam.' },
            { code: 'cn', name: 'China', hint: 'Bentuknya seperti Ayam Jago üêì' },
            { code: 'gb', name: 'Inggris', hint: 'Pulau Ratu Elizabeth.' },
            { code: 'ru', name: 'Rusia', hint: 'Negara paling panjang di dunia.' },
            { code: 'sa', name: 'Arab Saudi', hint: 'Bentuk sepatu besar di pasir.' },
            { code: 'eg', name: 'Mesir', hint: 'Bentuk kotak, ada piramida.' },
            { code: 'vn', name: 'Vietnam', hint: 'Bentuk huruf S.' },
            { code: 'ca', name: 'Kanada', hint: 'Negara tetangga Amerika di utara, ada daun maple üçÅ' },
            { code: 'mx', name: 'Meksiko', hint: 'Di selatan Amerika, suka Taco üåÆ' },
            { code: 'ar', name: 'Argentina', hint: 'Negara asal Messi, panjang di Amerika Selatan ‚öΩ' },
            { code: 'de', name: 'Jerman', hint: 'Terkenal dengan mobil dan sosis üå≠' },
            { code: 'es', name: 'Spanyol', hint: 'Negara Matador üêÇ' },
            { code: 'th', name: 'Thailand', hint: 'Bentuknya seperti kepala Gajah üêò' },
            { code: 'kr', name: 'Korea Selatan', hint: 'Negara K-Pop üéµ' },
            { code: 'nz', name: 'Selandia Baru', hint: 'Dua pulau tetangga Australia ü•ù' },
            { code: 'mg', name: 'Madagaskar', hint: 'Pulau besar di dekat Afrika, ada lemur üêí' },
            { code: 'ph', name: 'Filipina', hint: 'Negara kepulauan tetangga kita di utara üáµüá≠' },
            { code: 'tr', name: 'Turki', hint: 'Jembatan antara Eropa dan Asia üåâ' },
            { code: 'no', name: 'Norwegia', hint: 'Negara Viking yang panjang di utara ‚ùÑÔ∏è' },
            { code: 'gr', name: 'Yunani', hint: 'Banyak pulau dan sejarah kuno üèõÔ∏è' },
            { code: 'pt', name: 'Portugal', hint: 'Tetangga Spanyol, asal Ronaldo ‚öΩ' },
            { code: 'my', name: 'Malaysia', hint: 'Tetangga serumpun kita üá≤üáæ' },
            { code: 'sg', name: 'Singapura', hint: 'Negara kota kecil yang sangat maju ü¶Å' },
            { code: 'pg', name: 'Papua Nugini', hint: 'Berbagi pulau dengan Papua kita üèùÔ∏è' },
            { code: 'lk', name: 'Sri Lanka', hint: 'Pulau tetesan air mata di bawah India üíß' },
            { code: 'is', name: 'Islandia', hint: 'Pulau Es dan Api üåã' },
            { code: 'cu', name: 'Kuba', hint: 'Pulau cerutu di Karibia üá®üá∫' }
        ];

        // --- AUDIO ENGINE ---
        const playSound = (type) => {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (!AudioContext) return;
            const ctx = new AudioContext();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);

            if (type === 'correct') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(400, ctx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(800, ctx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.2, ctx.currentTime);
                gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.4);
                osc.start();
                osc.stop(ctx.currentTime + 0.4);
            } else if (type === 'wrong') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(150, ctx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, ctx.currentTime + 0.3);
                gain.gain.setValueAtTime(0.2, ctx.currentTime);
                gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.3);
                osc.start();
                osc.stop(ctx.currentTime + 0.3);
            } else if (type === 'pop') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(800, ctx.currentTime);
                gain.gain.setValueAtTime(0.05, ctx.currentTime);
                gain.gain.linearRampToValueAtTime(0, ctx.currentTime + 0.1);
                osc.start();
                osc.stop(ctx.currentTime + 0.1);
            }
        };

        function App() {
            const [view, setView] = React.useState('home'); // home, play, end
            const [qList, setQList] = React.useState([]);
            const [qIndex, setQIndex] = React.useState(0);
            const [score, setScore] = React.useState(0);
            const [revealed, setRevealed] = React.useState(false);
            const [colorClass, setColorClass] = React.useState('map-color-1');

            // Random color for map shape
            const getRandomColorClass = () => {
                const colors = ['map-color-1', 'map-color-2', 'map-color-3', 'map-color-4'];
                return colors[Math.floor(Math.random() * colors.length)];
            };

            const startGame = () => {
                playSound('pop');
                const shuffled = [...mapsData].sort(() => 0.5 - Math.random()).slice(0, 10);
                setQList(shuffled);
                setQIndex(0);
                setScore(0);
                setRevealed(false);
                setColorClass(getRandomColorClass());
                setView('play');
            };

            const handleAnswer = (correct) => {
                if (correct) {
                    playSound('correct');
                    setScore(s => s + 1);
                    confetti({
                        particleCount: 80, spread: 60, origin: { y: 0.6 },
                        colors: ['#60A5FA', '#34D399', '#F472B6']
                    });
                    setTimeout(nextQ, 600);
                } else {
                    playSound('wrong');
                    setTimeout(nextQ, 1000);
                }
            };

            const nextQ = () => {
                if (qIndex < qList.length - 1) {
                    setQIndex(i => i + 1);
                    setRevealed(false);
                    setColorClass(getRandomColorClass());
                } else {
                    setView('end');
                    playSound('correct');
                }
            };

            const currentQ = qList[qIndex];

            // --- VIEWS ---

            if (view === 'home') {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden">
                        {/* Decorative Blobs */}
                        <div className="absolute top-10 left-10 w-32 h-32 bg-blue-300 opacity-50 blob-shape animate-float"></div>
                        <div className="absolute bottom-10 right-10 w-40 h-40 bg-pink-300 opacity-50 blob-shape animate-float" style={{ animationDelay: '1s' }}></div>

                        <div className="relative z-10 bg-white/80 backdrop-blur-md p-8 rounded-3xl shadow-2xl border-4 border-white text-center max-w-md w-full">
                            <div className="text-6xl mb-4 animate-bounce">üó∫Ô∏è</div>
                            <h1 className="text-4xl font-extrabold text-slate-700 mb-2 font-[Fredoka]">Tebak Peta</h1>
                            <p className="text-slate-500 text-lg mb-8 font-medium">Petualangan Keliling Dunia!</p>
                            <button onClick={startGame} className="w-full bg-sky-500 hover:bg-sky-600 text-white text-2xl font-bold py-4 rounded-xl shadow-[0_6px_0_#0369a1] active:translate-y-1 active:shadow-none transition-all">
                                Mulai Petualangan! üöÄ
                            </button>
                        </div>
                    </div>
                );
            }

            if (view === 'end') {
                return (
                    <div className="min-h-screen flex flex-col items-center justify-center p-4">
                        <div className="bg-white p-8 rounded-3xl shadow-xl border-4 border-yellow-300 max-w-md w-full text-center">
                            <h2 className="text-3xl font-bold text-slate-700 mb-4">Misi Selesai!</h2>
                            <div className="text-7xl font-black text-sky-500 mb-2">{score * 10}</div>
                            <p className="text-gray-400 font-bold mb-8">Poin Kamu</p>
                            <button onClick={startGame} className="w-full bg-yellow-400 hover:bg-yellow-500 text-yellow-900 text-xl font-bold py-3 rounded-xl shadow-[0_4px_0_#ca8a04] active:translate-y-1 active:shadow-none transition-all">
                                Main Lagi üîÑ
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4">
                    {/* Header */}
                    <div className="w-full max-w-md flex justify-between mb-6">
                        <div className="bg-white/90 backdrop-blur px-4 py-2 rounded-lg font-bold text-slate-600 shadow-sm border border-slate-200">
                            Map {qIndex + 1}/10
                        </div>
                        <div className="bg-white/90 backdrop-blur px-4 py-2 rounded-lg font-bold text-sky-600 shadow-sm border border-sky-100">
                            ‚≠ê {score}
                        </div>
                    </div>

                    {/* Map Card */}
                    <div className="relative bg-white p-6 rounded-[2.5rem] shadow-2xl border-8 border-white w-full max-w-md">

                        {/* Shape Container */}
                        <div className="aspect-square bg-slate-50 rounded-3xl mb-6 flex items-center justify-center p-8 relative overflow-hidden border-2 border-dashed border-slate-200">
                            {/* Hint Background Text */}
                            <div className="absolute inset-0 flex items-center justify-center opacity-5 pointer-events-none">
                                <span className="text-9xl font-black">?</span>
                            </div>

                            {/* THE MAP IMAGE */}
                            <img
                                src={`https://raw.githubusercontent.com/djaiss/mapsicon/master/all/${currentQ.code}/vector.svg`}
                                className={`w-full h-full object-contain drop-shadow-lg transition-all duration-500 ${colorClass}`}
                                alt="Map Silhouette"
                            />
                        </div>

                        {/* Question / Reveal Area */}
                        <div className="text-center h-24 flex flex-col items-center justify-center mb-4">
                            <div
                                onClick={() => { playSound('pop'); setRevealed(true); }}
                                className={`cursor-pointer transition-all ${!revealed ? 'hover:scale-105' : ''}`}
                            >
                                {!revealed ? (
                                    <>
                                        <h2 className="text-3xl font-black text-slate-300 tracking-[0.3em]">?????</h2>
                                        <p className="text-xs text-sky-400 font-bold mt-2 bg-sky-50 px-3 py-1 rounded-full inline-block animate-pulse">
                                            üîç Klik untuk intip
                                        </p>
                                    </>
                                ) : (
                                    <div className="animate-pop">
                                        <h2 className="text-4xl font-black text-slate-800 tracking-tight">{currentQ.name}</h2>
                                        <p className="text-sm text-slate-500 font-medium mt-1">{currentQ.hint}</p>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Controls */}
                        <div className="grid grid-cols-2 gap-4">
                            <button onClick={() => handleAnswer(false)} className="bg-rose-100 hover:bg-rose-200 text-rose-500 font-black py-4 rounded-2xl shadow-[0_4px_0_#f43f5e] active:translate-y-1 active:shadow-none transition-all flex flex-col items-center">
                                <span className="text-2xl">‚ùå</span>
                                <span className="text-sm mt-1">Belum Tau</span>
                            </button>
                            <button onClick={() => handleAnswer(true)} className="bg-emerald-100 hover:bg-emerald-200 text-emerald-600 font-black py-4 rounded-2xl shadow-[0_4px_0_#059669] active:translate-y-1 active:shadow-none transition-all flex flex-col items-center">
                                <span className="text-2xl">‚úÖ</span>
                                <span className="text-sm mt-1">Benar!</span>
                            </button>
                        </div>

                    </div>

                    <div className="mt-6 text-center text-slate-400 text-xs font-bold opacity-60">
                        Happy Kid, Happy Family
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);

    </script>
</body>

</html>